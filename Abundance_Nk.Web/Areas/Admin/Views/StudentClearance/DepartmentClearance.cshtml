
@model Abundance_Nk.Web.Areas.Admin.ViewModels.StudentClearanceViewModel
@{
    ViewBag.Title = "DepartmentClearance";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
@section Scripts {


    <link href="~/Scripts/DataTables-1.10.15/media/css/jquery.dataTables.css" rel="stylesheet" />
    <script src="~/Scripts/DataTables-1.10.15/media/js/jquery.dataTables.js"></script>
    <link href="~/Scripts/DataTables-1.10.15/extensions/Buttons/css/buttons.dataTables.css" rel="stylesheet" />
    <script src="~/Scripts/DataTables-1.10.15/extensions/Buttons/js/dataTables.buttons.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/extensions/Buttons/js/buttons.colVis.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/extensions/Responsive/js/dataTables.responsive.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/buttons.flash.min.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/buttons.html5.min.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/buttons.print.min.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/jszip.min.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/pdfmake.min.js"></script>
    <script src="~/Scripts/DataTables-1.10.15/vfs_fonts.js"></script>


    <script type="text/javascript">


        $(document).ready(function () {
            $.extend($.fn.dataTable.shadows, {
                responsive: false
            });

            $("#clearanceTable").DataTable({
                dom: 'Bfrtip',
                ordering: true,
                buttons: [
                    {
                        extend: 'copy',
                        exportOptions: {
                            columns: ':visible',
                            modifier: {
                                orientation: 'landscape'
                            }
                        },
                        orientation: 'landscape'


                    },
                    {
                        extend: 'csv',
                        exportOptions: {
                            columns: ':visible',
                            modifier: {
                                orientation: 'landscape'
                            }
                        },
                        orientation: 'landscape'

                    },
                    {
                        extend: 'excel',
                        exportOptions: {
                            columns: ':visible',
                            modifier: {
                                orientation: 'landscape'
                            }
                        },
                        orientation: 'landscape'


                    },
                    {
                        extend: 'pdf',
                        exportOptions: {
                            columns: ':visible',
                            header: true,
                            modifier: {
                                orientation: 'landscape'
                            }



                        },
                        orientation: 'landscape'


                    },
                    {
                        extend: 'print',
                        exportOptions: {
                            columns: ':visible',
                            modifier: {
                                orientation: 'landscape'
                            }
                        },
                        orientation: 'landscape'


                    }, , 'colvis'
                ]
            });
        })
    </script>
}

<div class="col-md-10 ml-auto mr-auto">

    <div>
        @if (TempData["Message"] != null)
            {
            @Html.Partial("_Message", (Abundance_Nk.Model.Model.Message)TempData["Message"])
        }
    </div>

    <div class="card card-shadow">
        <div class="card-header">
            <h4>Student List For Deparmental Clearance</h4>
        </div>
        <div class="card-body">

        </div>
        <br />

        <div class="card-body">

            <div class="table-responsive ">
                <table class="table-bordered table-hover table-striped table" id="clearanceTable">
                    <thead>
                        <tr>
                            <th>S/N</th>

                            <th>
                                Name Of Student
                            </th>
                            <th>
                                Matric Number
                            </th>
                            <th>
                                Clear
                            </th>
                            <th>
                                Remark
                            </th>
                            <th>
                                View Dispute
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (int i = 0; i < Model.ClearanceLogs.Count; i++)
                        {
                            var sn = i + 1;
                            <tr>

                                @Html.HiddenFor(model => model.ClearanceLogs[i].Id)
                                <td>@sn</td>
                                <td>
                                    @Model.ClearanceLogs[i].Student.FullName
                                </td>
                                <td>
                                    @Model.ClearanceLogs[i].Student.MatricNumber
                                </td>
                                <td>
                                    @Html.ActionLink("Clear", "ClearStudent", new { area = "Admin", controller = "StudentClearance", Id = @Model.ClearanceLogs[i].Id }, new { @class = "btn btn-success mr5" })
                                </td>
                                <td>
                                    @Html.ActionLink("Decline", "IncompleteClearance", new { area = "Admin", controller = "StudentClearance", Id = @Model.ClearanceLogs[i].Id}, new { @class = "btn btn-success mr5" })
                                </td>
                                @if (Model.ClearanceLogs[i].IsDisputed)
                                {
                                    <td>
                                        @Html.ActionLink("View Dispute", "ViewDisputedClearances", new { area = "Admin", controller = "StudentClearance", logId = @Model.ClearanceLogs[i].Id }, new { @class = "btn btn-success mr5" })
                                    </td>
                                }
                                else
                                {
                                    <td></td>
                                }

                            </tr>
                        }
                    </tbody>
                </table>
            </div>


        </div>

    </div>
</div>


